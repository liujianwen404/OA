(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"25eb":function(i,e,t){var s=t("23e7"),n=t("c20d");s({target:"Number",stat:!0,forced:Number.parseInt!=n},{parseInt:n})},2687:function(i,e,t){"use strict";(function(i){var s=t("dbce"),n=t("4ea4");t("99af"),t("a9e3"),t("25eb"),t("ac1f"),t("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(t("ade3")),o=n(t("9c41")),r=n(t("d812")),l=(n(t("6c8a")),t("589c")),u=t("d512"),d=(s(t("a725")),{components:{uniIcon:r.default,uniPopup:o.default},data:function(){return{elasticityFlag:null,groupId:null,classId:null,sessionId:null,userId:null,userName:"",bzText:{time:"",address:"",img:"",remarks:""},type:"",r:0,Timer:[{time:"09:00",num:null},{time:"18:00",num:null}],isAm:!1,isPm:!1,amSign:{time:"",address:"",remarks:"",img:""},pmSign:{time:"",address:"",remarks:"",img:""},clickNum:0,is:null,isRest:!1,isSign:!1,time:(0,l.formateDate)(new Date,"h:min:s"),date:(0,l.formateDate)(new Date,"Y-M-D"),latitude:null,longitude:null,radius:null,address:null,wqInfo:null,imgURL:[],remarks:"",signInfo:{mode:"",latitude:"",longitude:"",address:"",time:"",remarks:"",imgURL:"",classId:"",groupId:"",userId:"",userName:""},covers:[{id:0,callout:{content:null,color:"red",display:"ALWAYS"},latitude:null,longitude:null,iconPath:"../../../static/img/location.png"}],circles:[{latitude:null,longitude:null,radius:null,strokeWidth:1,fillColor:"#7fff0099"}]}},onLoad:function(e){this.isLegal();var t=uni.getStorageSync("sessionId"),s=uni.getStorageSync("userId"),n=uni.getStorageSync("userName");this.sessionId=JSON.parse(t),this.signInfo.userId=this.userId=JSON.parse(s),this.signInfo.userName=this.userName=JSON.parse(n),null!=e.imgURL&&""!=e.imgURL&&(this.signInfo.imgURL=this.imgURL=e.imgURL),null!=e.remarks&&""!=e.remarks&&(this.signInfo.remarks=this.remarks=e.remarks),this.getData(),this.getLocation(),this.getTime(),i("log","当前session信息: "+this.sessionId," at pages/index/index.vue:267")},methods:{togglePopup:function(i){this.type=i},goRule:function(){uni.navigateTo({url:"/pages/rule/rule"})},getAdd:function(){if(this.isLegal(),!0===this.is){var e=this.covers[0].callout.content;return this.address=e,void(this.signInfo.address=e)}var t=this,s=u.webApiURL+"/webApi/api/map/?location=".concat(t.latitude,",").concat(t.longitude,"&key=").concat(u.key);uni.request({url:s,success:function(e){i("log","腾讯位置服务getAdd()方法成功回调: "+JSON.stringify(e)," at pages/index/index.vue:302");var s=e.data;if(0==s.status)if(null!=s.result.address){var n=s.result.address;t.address=n,t.signInfo.address=n}else t.address="请检查位置信息！",t.is=null;else uni.showToast({title:s.message,icon:"none",position:"center"})},fail:function(e){i("log","腾讯位置定位接口调用失败: "+JSON.stringify(e)," at pages/index/index.vue:320"),t.address="请检查位置信息！",t.is=null}})},getData:function(){this.isLegal();var e=this,t=u.webApiURL+"/webApi/attendance/getData";uni.request({url:t,data:{sessionId:this.sessionId},success:function(t){if(i("log","初始化数据开始:"+JSON.stringify(t.data)," at pages/index/index.vue:338"),0==t.data.code){var s=t.data.data,n=s.isRest;if(null!=n)return void(e.isRest=n);e.covers[0].callout.content=s.address,e.covers[0].latitude=e.circles[0].latitude=s.latitude,e.covers[0].longitude=e.circles[0].longitude=s.longitude,e.r=e.circles[0].radius=s.scope,e.Timer[0].time=s.work_time,e.Timer[1].time=s.closing_time,e.signInfo.groupId=e.groupId=s.group_id,e.signInfo.classId=e.classId=s.class_id;var a=e.elasticityFlag=s.elasticity_flag,o=s.rest_start_time,r=s.clockIn;if(null!=r.length&&0!=r.length){i("log","打卡信息不为空"," at pages/index/index.vue:359");for(var l=0;l<r.length;l++){var u=r[l].check_type;if("OnDuty"==u){e.amSign.address=r[l].user_address,e.amSign.time=r[l].user_check_time,e.amSign.remarks=r[l].remark,e.isAm=!0,"Outside"==r[l].location_result?e.amSign.mode="外勤打卡":e.amSign.mode="正常打卡";var d=r[l].time_result;"Normal"==d?e.amSign.timeResult="Normal":"NotSigned"==d?(e.amSign.time=void 0,e.amSign.timeResult="NotSigned"):e.amSign.timeResult="AbsenteeismLateOneDay"==d?"Absenteeism":"Late"}if("OffDuty"==u){e.pmSign.address=r[l].user_address,e.pmSign.time=r[l].user_check_time,e.pmSign.remarks=r[l].remark,e.isAm=!0,e.isPm=!0,"Outside"==r[l].location_result?e.pmSign.mode="外勤打卡":e.pmSign.mode="正常打卡";var c=r[l].time_result;e.pmSign.timeResult="Normal"==c?"Normal":"AbsenteeismEarlyOneDay"==c?"Absenteeism":"Early"}}null!=e.amSign.time&&""!=e.amSign.time||(e.amSign.time=void 0)}else if(i("log","打卡信息为空"," at pages/index/index.vue:421"),null!=o){var m=Number.parseInt(o.split(":")[0]),p=60*Number.parseInt(m)+Number.parseInt(o.split(":")[1]),v=new Date,g=60*Number.parseInt(v.getHours())+Number.parseInt(v.getMinutes());i("log","restNum: "+p," at pages/index/index.vue:427"),i("log","nowNum: "+g," at pages/index/index.vue:428"),"0"==a&&g>p&&(null!=e.amSign.time&&""!=e.amSign.time||(e.amSign.time=void 0),e.isAm=!0)}i("log","初始化数据结束！"," at pages/index/index.vue:442")}else{var f=t.data.msg;uni.showModal({title:"系统提示",content:f,position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/error/404"})}})}},fail:function(i){var e=i.data.msg;uni.showModal({title:"系统提示",content:e,position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/error/500"})}})}})},getClockIn:function(){var e=this;this.isLegal();var t=u.webApiURL+"/webApi/clockIn/getClockIn";uni.request({url:t,data:{userId:this.userId},success:function(t){if(i("log","获取员工当日打卡信息:"+JSON.stringify(t.data)," at pages/index/index.vue:483"),0==t.data.code){var s=t.data.data;if(null!=s.length||0!=s.length)for(var n=0;n<s.length;n++){var a=s[n].check_type;"OnDuty"==a&&(e.amSign.address=s[n].user_address,e.amSign.time=s[n].user_check_time,e.isAm=!0),"OffDuty"==a&&(e.pmSign.address=s[n].user_address,e.pmSign.time=s[n].user_check_time,e.isAm=!0,e.isPm=!0)}}},fail:function(i){uni.showModal({title:"系统提示",content:"系统错误,请重新联系管理员",position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/login/login"})}})}})},addClockIn:function(){var i=this.covers[0].callout.content,e=this.circles[0].radius,t=this.circles[0].latitude,s=this.circles[0].longitude;uni.navigateTo({url:"/pages/sign/sign?address="+i+"&radius="+e+"&latitude="+t+"&longitude="+s})},bindDateChange:function(i){this.date=i.target.value},reset:function(){this.isLegal();var e=this,t=this.isAm,s=this.isPm,n=this.userId,a=this.sessionId;1==t&&1==s?uni.showModal({title:"重置本地打卡信息",content:"重置下班打卡信息,可以更新打卡信息",success:function(t){var s=u.webApiURL+"/webApi/clockIn/delClockIn";if(t.confirm)e.isSign=!1,e.isPm=!1,uni.request({url:s,data:{userId:n,sessionId:a},success:function(e){i("log","删除下班卡接口成功:"+JSON.stringify(e)," at pages/index/index.vue:556");var t=e.data;if(0==t.code)uni.redirectTo({url:"/pages/index/index"});else{var s=e.data.msg;uni.showModal({title:"系统提示",content:s,position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/error/404"})}})}},fail:function(e){i("log","删除打卡接口调用失败: "+JSON.stringify(e)," at pages/index/index.vue:574");var t=e.data.msg;uni.showModal({title:"系统提示",content:t,position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/error/404"})}})}});else if(t.cancel)return}}):uni.showModal({title:"重置本地打卡信息",content:"请直接打卡！",success:function(i){}})},showBz:function(i){this.type="middle-list","amSign"==i?(this.bzText.time=this.amSign.time,this.bzText.address=this.amSign.address,this.bzText.remarks=this.amSign.remarks):"pmSign"==i&&(this.bzText.time=this.pmSign.time,this.bzText.address=this.pmSign.address,this.bzText.remarks=this.pmSign.remarks)},getTime:function(){var i=this;setInterval((function(){i.time=(0,l.formateDate)(new Date,"h:min:s")}),100)},getLocation:function(){var e=this;if(0!==this.clickNum&&uni.showLoading({title:"获取中...",mask:!0}),this.clickNum>=3)return this.clickNum--,void uni.showToast({title:"请稍后尝试！",icon:"none",mask:!0,position:"center"});this.clickNum++,uni.getLocation({type:"gcj02",geocode:!0,success:function(t){i("log","获取当前位置坐标成功======>"+JSON.stringify(t)," at pages/index/index.vue:643"),e.latitude=t.latitude,e.longitude=t.longitude;var s=e.circles[0].latitude,n=e.circles[0].longitude,a=e.circles[0].radius;e.covers[1]={id:1,latitude:t.latitude,longitude:t.longitude,iconPath:"../../static/location.png"};var o=(0,l.countRadius)([e.latitude,e.longitude],[s,n],a);e.is=o,e.signInfo.latitude=t.latitude,e.signInfo.longitude=t.longitude,e.signInfo.mode=o?"正常打卡":"外勤打卡",e.getAdd(),setTimeout((function(){uni.hideLoading()}),1e3)},fail:function(t){this.is=null,e.address="请检查位置信息！",i("log","获取当前位置坐标失败======>"+JSON.stringify(t)," at pages/index/index.vue:674")}})},clickSign:function(){this.isLegal();var e=this.is;if(null!==e){uni.showLoading({title:"打卡记录中...",mask:!0}),this.signInfo.time=(0,l.formateDate)(new Date,"Y-M-D h:min:s");var t=(0,u.getSignInfo)();void 0!=t?(0,u.addSignInfo)((0,u.getInfo)(this.signInfo),t):(0,u.setSignInfo)((0,u.getInfo)(this.signInfo));var s=(0,u.getInfo)(this.signInfo);i("log","点击打卡后的打卡数据:"+JSON.stringify(s)," at pages/index/index.vue:703");var n=this.sessionId;!1===this.isAm&&!1===this.isPm?uni.request({url:u.webApiURL+"/webApi/clockIn/saveClockIn",method:"POST",data:{mode:s.mode,address:s.address,time:s.time,longitude:s.longitude,latitude:s.latitude,remarks:s.remarks,userId:s.userId,userName:s.userName,groupId:s.groupId,classId:s.classId,imgURL:s.imgURL,is:this.is,isAm:!0,isPm:!1,sessionId:n},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){if(i("log","上班卡成功回调: "+JSON.stringify(e)," at pages/index/index.vue:732"),0==e.data.code)uni.showToast((0,a.default)({icon:"success",position:"bottom",title:"打卡成功"},"position","center")),uni.hideLoading(),setTimeout((function(){uni.redirectTo({url:"/pages/index/index"})}),1e3);else{var t=e.data.msg;uni.showModal({title:"系统提示",content:t,position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/error/404"})}})}},fail:function(i){var e=i.data.msg;uni.showModal({title:"系统提示",content:e,position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/error/404"})}})}}):uni.request({url:u.webApiURL+"/webApi/clockIn/saveClockIn",method:"POST",data:{mode:s.mode,address:s.address,time:s.time,longitude:s.longitude,latitude:s.latitude,remarks:s.remarks,userId:s.userId,userName:s.userName,groupId:s.groupId,classId:s.classId,imgURL:s.imgURL,is:this.is,isAm:!1,isPm:!0,sessionId:n},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){if(i("log","下班卡成功回调: "+JSON.stringify(e.data)," at pages/index/index.vue:802"),0==e.data.code)uni.showToast((0,a.default)({icon:"success",position:"bottom",title:"打卡成功"},"position","center")),uni.hideLoading(),setTimeout((function(){uni.redirectTo({url:"/pages/index/index"})}),1e3);else{var t=e.data.msg;uni.showModal({title:"系统提示",content:t,position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/error/404"})}})}},fail:function(i){var e=i.data.msg;uni.showModal({title:"系统提示",content:e,position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/error/404"})}})}})}else uni.showToast({title:"请检查位置信息状态！",icon:"none",mask:!0,duration:3e3,position:"center"})},openLocation:function(){var i=this;uni.chooseLocation({success:function(e){i.address=e.address,i.signInfo.address=e.address;var t=(0,l.countRadius)([i.latitude,i.longitude],[i.circles[0].latitude,i.circles[0].longitude],i.r);i.is=t}})},reLocation:function(){this.getLocation()},isLegal:function(){var i=uni.getStorageSync("sessionId");void 0==i&&uni.showModal({title:"系统提示",content:"非法访问",position:"center",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/login/login"})}})}}});e.default=d}).call(this,t("0de9")["log"])},"26f7":function(i,e,t){"use strict";var s=t("a209"),n=t.n(s);n.a},"4c7e":function(i,e,t){"use strict";t.d(e,"b",(function(){return n})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return s}));var s={uniIcon:t("d812").default,uniPopup:t("9c41").default},n=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("v-uni-view",{staticClass:"content"},[t("v-uni-view",{staticClass:"page-body"},[t("v-uni-view",{staticClass:"sign-title"},[t("v-uni-view",{staticClass:"sign-title-l"},[t("v-uni-view",{staticClass:"portrait"},[i._v(i._s(i.userName))])],1),t("v-uni-view",{staticClass:"sign-title-r"},[t("v-uni-view",{staticClass:"date"},[t("v-uni-view",{staticClass:"uni-input"},[i._v(i._s(i.date)),t("uni-icon",{attrs:{type:"arrowdown"}})],1)],1)],1)],1),t("v-uni-text",{staticClass:"addClockIn",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.reset.apply(void 0,arguments)}}},[i._v("重置")]),t("v-uni-view",{staticStyle:{"text-align":"center",padding:"20upx 0"}},[i._v("当前位置:"),t("v-uni-text",[i._v(i._s(i.address))])],1),t("v-uni-view",{staticClass:"uni-timeline"},[t("v-uni-view",{staticClass:"uni-timeline-item uni-timeline-first-item"},[t("v-uni-view",{staticClass:"uni-timeline-item-divider",style:{background:i.isAm?"#bbb":"#1AAD19"}}),t("v-uni-view",{staticClass:"uni-timeline-item-content"},[t("v-uni-view",[t("v-uni-view",{staticClass:"uni-timeline-item-content-t1"},[i._v("上班时间"+i._s(i.Timer[0].time))]),i.isAm?t("v-uni-view",{staticClass:"desc-pad"},[void 0===i.amSign.time?t("v-uni-view",[t("v-uni-view",{staticClass:"time uni-timeline-item-content-t"},[i._v("缺卡")])],1):t("v-uni-view",[t("v-uni-view",{staticClass:"time uni-timeline-item-content-t"},[i._v("打卡时间 "+i._s(i.amSign.time.substring(10,16))),"外勤打卡"==i.amSign.mode?t("v-uni-view",{staticClass:"iswq"},[i._v("外勤")]):i._e(),"Late"==i.amSign.timeResult?t("v-uni-view",{staticClass:"isNormal"},[i._v("迟到")]):i._e(),"Absenteeism"==i.amSign.timeResult?t("v-uni-view",{staticClass:"isNormal"},[i._v("旷工")]):i._e()],1),t("v-uni-view",[t("uni-icon",{attrs:{type:"location-filled"}}),i._v(i._s(i.amSign.address))],1),t("v-uni-view",{staticClass:"bz last",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.showBz("amSign")}}},[i._v("备注"),t("uni-icon",{style:{color:"rgb(0, 122, 255)"},attrs:{type:"forward"}})],1)],1)],1):t("v-uni-view",{staticClass:"content-show"},[!0===i.isRest?t("v-uni-view",[t("v-uni-view",{staticClass:"module CAsh"},[t("v-uni-view",{staticClass:"text"},[i._v("无法打卡")]),t("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1),i.isRest?t("v-uni-view",{staticClass:"colorBlack",staticStyle:{"text-align":"center"}},[i._v("不属于考勤打卡时间")]):i._e()],1):t("v-uni-view",[!0===i.is?t("v-uni-view",[t("v-uni-view",{staticClass:"module CBlue",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.clickSign.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"text"},[i._v("上班打卡")]),t("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1),i.is?t("v-uni-view",{staticClass:"colorGreen",staticStyle:{"text-align":"center"}},[i._v("已在考勤范围内"),t("v-uni-text",{staticClass:"addClockIn",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.addClockIn.apply(void 0,arguments)}}},[i._v("添加打卡信息")])],1):i._e()],1):!1===i.is?t("v-uni-view",[t("v-uni-view",{staticClass:"module CGreen",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.clickSign.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"text"},[i._v("外勤打卡")]),t("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1),i.is?i._e():t("v-uni-view",{staticClass:"colorRed",staticStyle:{"text-align":"center"}},[i._v("不在考勤范围内"),t("v-uni-text",{staticClass:"addClockIn",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.addClockIn.apply(void 0,arguments)}}},[i._v("添加打卡信息")])],1)],1):null===i.is?t("v-uni-view",[t("v-uni-view",{staticClass:"module CAsh"},[t("v-uni-view",{staticClass:"text"},[i._v("请检查位置信息")]),t("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1)],1):i._e()],1)],1)],1)],1)],1),t("v-uni-view",{staticClass:"uni-timeline-item uni-timeline-last-item"},[t("v-uni-view",{staticClass:"uni-timeline-item-divider",style:{background:i.isAm?"#1AAD19":"#bbb"}}),t("v-uni-view",{staticClass:"uni-timeline-item-content"},[t("v-uni-view",[t("v-uni-view",{staticClass:"uni-timeline-item-content-t1"},[i._v("下班时间"+i._s(i.Timer[1].time))]),i.isAm?t("v-uni-view",{staticClass:"desc-pad"},[i.isPm?t("v-uni-view",{staticClass:"desc-pad"},[void 0===i.pmSign.time?t("v-uni-view",[t("v-uni-view",{staticClass:"time uni-timeline-item-content-t"},[i._v("缺卡")])],1):t("v-uni-view",[t("v-uni-view",{staticClass:"time uni-timeline-item-content-t"},[i._v("打卡时间:"+i._s(i.pmSign.time.substring(10,16))),"外勤打卡"==i.pmSign.mode?t("v-uni-view",{staticClass:"iswq"},[i._v("外勤")]):i._e(),"Early"==i.pmSign.timeResult?t("v-uni-view",{staticClass:"isNormal"},[i._v("早退")]):i._e(),"Absenteeism"==i.pmSign.timeResult?t("v-uni-view",{staticClass:"isNormal"},[i._v("旷工")]):i._e()],1),t("v-uni-view",[t("uni-icon",{attrs:{type:"location-filled"}}),i._v(i._s(i.pmSign.address))],1),t("v-uni-view",{staticClass:"bz last",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.showBz("pmSign")}}},[i._v("备注"),t("uni-icon",{style:{color:"rgb(0, 122, 255)"},attrs:{type:"forward"}})],1)],1)],1):t("v-uni-view",{staticClass:"content-show"},[!0===i.isRest?t("v-uni-view",[t("v-uni-view",{staticClass:"module CGreen"},[t("v-uni-view",{staticClass:"text"},[i._v("无法打卡")]),t("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1),i.isRest?t("v-uni-view",{staticClass:"colorBlack",staticStyle:{"text-align":"center"}},[i._v("不属于考勤打卡时间")]):i._e()],1):t("v-uni-view",[!0===i.is?t("v-uni-view",[t("v-uni-view",{staticClass:"module CBlue",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.clickSign.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"text"},[i._v("下班打卡")]),t("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1),i.is?t("v-uni-view",{staticClass:"colorGreen",staticStyle:{"text-align":"center"}},[i._v("已在考勤范围内"),t("v-uni-text",{staticClass:"addClockIn",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.addClockIn.apply(void 0,arguments)}}},[i._v("添加打卡信息")])],1):i._e()],1):!1===i.is?t("v-uni-view",[t("v-uni-view",{staticClass:"module CGreen",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.clickSign.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"text"},[i._v("外勤打卡")]),t("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1),i.is?i._e():t("v-uni-view",{staticClass:"colorRed",staticStyle:{"text-align":"center"}},[i._v("不在考勤范围内"),t("v-uni-text",{staticClass:"addClockIn",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.addClockIn.apply(void 0,arguments)}}},[i._v("添加打卡信息")])],1)],1):null===i.is?t("v-uni-view",[t("v-uni-view",{staticClass:"module CAsh"},[t("v-uni-view",{staticClass:"text"},[i._v("请检查位置信息")]),t("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1)],1):i._e()],1)],1)],1):i._e()],1)],1)],1)],1),t("v-uni-text",{staticClass:"addClockIn",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.reLocation.apply(void 0,arguments)}}},[i._v("重新定位")])],1),t("uni-popup",{attrs:{show:"middle-list"===i.type,position:"middle",mode:"fixed"},on:{hidePopup:function(e){arguments[0]=e=i.$handleEvent(e),i.togglePopup("")}}},[t("v-uni-view",{staticClass:"title",staticStyle:{padding:"20upx 0","font-weight":"bold",width:"100%","text-align":"center","border-bottom":"1px solid #666"}},[i._v("打卡备注")]),t("v-uni-view",{staticClass:"content",staticStyle:{padding:"20upx 10upx",width:"100%"}},[t("v-uni-text",{staticClass:"text"},[i._v("打卡时间:")]),t("v-uni-text",[i._v(i._s(i.bzText.time))]),t("v-uni-view",{staticClass:"text"},[i._v("打卡地点:")]),t("v-uni-view",[i._v(i._s(i.bzText.address))])],1),t("v-uni-view",{staticClass:"content",staticStyle:{padding:"20upx 10upx",width:"100%"}},[t("v-uni-view",[i._v(i._s(i.bzText.remarks))])],1),t("v-uni-view",{staticClass:"bottom",staticStyle:{padding:"20upx 10upx",color:"cadetblue",width:"100%","text-align":"center","border-top":"1px solid #666"},on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.togglePopup("")}}},[i._v("关闭")])],1)],1)},a=[]},"57b9":function(i,e,t){"use strict";var s=t("b114"),n=t.n(s);n.a},"589c":function(i,e,t){(function(e){function s(i){if("number"!==typeof i||i<0)return i;var e=parseInt(i/3600);i%=3600;var t=parseInt(i/60);i%=60;var s=i;return[e,t,s].map((function(i){return i=i.toString(),i[1]?i:"0"+i})).join(":")}function n(i,e){return"string"===typeof i&&"string"===typeof e&&(i=parseFloat(i),e=parseFloat(e)),i=i.toFixed(2),e=e.toFixed(2),{longitude:i.toString().split("."),latitude:e.toString().split(".")}}t("a15b"),t("d81d"),t("fb6a"),t("4e82"),t("a9e3"),t("b680"),t("b64b"),t("d3b7"),t("acd8"),t("e25e"),t("ac1f"),t("25f0"),t("1276");var a={UNITS:{"年":315576e5,"月":26298e5,"天":864e5,"小时":36e5,"分钟":6e4,"秒":1e3},humanize:function(i){var e="";for(var t in this.UNITS)if(i>=this.UNITS[t]){e=Math.floor(i/this.UNITS[t])+t+"前";break}return e||"刚刚"},format:function(i){var e=this.parse(i),t=Date.now()-e.getTime();if(t<this.UNITS["天"])return this.humanize(t);var s=function(i){return i<10?"0"+i:i};return e.getFullYear()+"/"+s(e.getMonth()+1)+"/"+s(e.getDay())+"-"+s(e.getHours())+":"+s(e.getMinutes())},parse:function(i){var e=i.split(/[^0-9]/);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])}};function o(i,e){var t=i.getFullYear(),s=("0"+(i.getMonth()+1)).slice(-2),n=("0"+i.getDate()).slice(-2),a=("0"+i.getHours()).slice(-2),o=("0"+i.getMinutes()).slice(-2),r=("0"+i.getSeconds()).slice(-2);if("Y-M-D h:min:s"===e)var l=t+"-"+s+"-"+n+" "+a+":"+o+":"+r;else if("Y-M-D"===e)l=t+"-"+s+"-"+n;if("h:min:s"===e)l=a+":"+o+":"+r;return l}function r(i){for(var e=[],t={},s=0;s<i.length;s++){var n=Object.keys(i[s]);n.sort((function(i,e){return Number(i)-Number(e)}));for(var a="",o=0;o<n.length;o++)a+=JSON.stringify(n[o]),a+=JSON.stringify(i[s][n[o]]);t.hasOwnProperty(a)||(e.push(i[s]),t[a]=!0)}return e=e,e}function o(i,e){var t=i.getFullYear(),s=("0"+(i.getMonth()+1)).slice(-2),n=("0"+i.getDate()).slice(-2),a=("0"+i.getHours()).slice(-2),o=("0"+i.getMinutes()).slice(-2),r=("0"+i.getSeconds()).slice(-2);if("Y-M-D h:min:s"===e)var l=t+"-"+s+"-"+n+" "+a+":"+o+":"+r;else if("Y-M-D"===e)l=t+"-"+s+"-"+n;if("h:min:s"===e)l=a+":"+o+":"+r;else if("h"===e)l=a;else if("min"===e)l=o;return l}function l(i,e){switch(arguments.length){case 1:return parseInt(Math.random()*i+1,10);case 2:return parseInt(Math.random()*(e-i+1)+i,10);default:return 0}}function u(i,e,t){if(0===t)return!1;var s=e[0]-i[0],n=e[1]-i[1];return s*s+n*n<=t*t}function d(i,t,s){if(0===s)return!1;var n=i[0]*Math.PI/180,a=t[0]*Math.PI/180,o=n-a,r=i[1]*Math.PI/180-t[1]*Math.PI/180,l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(n)*Math.cos(a)*Math.pow(Math.sin(r/2),2)));l*=6378.137,l=Math.round(1e4*l)/1e4;var u=1e3*l;return e("log","当前坐标位置与打卡圆心距离："+u," at common/util.js:163"),u<=s}function c(i){var e=new Date(i),t=new Date;return e.setHours(0,0,0,0)==t.setHours(0,0,0,0)}i.exports={formatTime:s,formatLocation:n,dateUtils:a,formateDate:o,deteleObject:r,randomNum:l,pointInsideCircle:u,isSameDay:c,countRadius:d}}).call(this,t("0de9")["log"])},"5ca3":function(i,e,t){"use strict";t.r(e);var s=t("794f"),n=t.n(s);for(var a in s)"default"!==a&&function(i){t.d(e,i,(function(){return s[i]}))}(a);e["default"]=n.a},"6c8a":function(i,e,t){(function(e){var s;function n(){var i=!1,t=plus.ios.import("UIApplication"),s=t.sharedApplication(),n=0;if(s.currentUserNotificationSettings){var a=s.currentUserNotificationSettings();n=a.plusGetAttribute("types"),e("log","enabledTypes1:"+n," at js_sdk/wa-permission/permission.js:19"),0==n?e("log","推送权限没有开启"," at js_sdk/wa-permission/permission.js:21"):(i=!0,e("log","已经开启推送功能!"," at js_sdk/wa-permission/permission.js:24")),plus.ios.deleteObject(a)}else n=s.enabledRemoteNotificationTypes(),0==n?e("log","推送权限没有开启!"," at js_sdk/wa-permission/permission.js:30"):(i=!0,e("log","已经开启推送功能!"," at js_sdk/wa-permission/permission.js:33")),e("log","enabledTypes2:"+n," at js_sdk/wa-permission/permission.js:35");return plus.ios.deleteObject(s),plus.ios.deleteObject(t),i}function a(){var i=!1,t=plus.ios.import("CLLocationManager"),s=t.authorizationStatus();return i=2!=s,e("log","定位权限开启："+i," at js_sdk/wa-permission/permission.js:48"),plus.ios.deleteObject(t),i}function o(){var i=!1,t=plus.ios.import("AVAudioSession"),s=t.sharedInstance(),n=s.recordPermission();return e("log","permissionStatus:"+n," at js_sdk/wa-permission/permission.js:70"),1684369017==n||1970168948==n?e("log","麦克风权限没有开启"," at js_sdk/wa-permission/permission.js:72"):(i=!0,e("log","麦克风权限已经开启"," at js_sdk/wa-permission/permission.js:75")),plus.ios.deleteObject(t),i}function r(){var i=!1,t=plus.ios.import("AVCaptureDevice"),s=t.authorizationStatusForMediaType("vide");return e("log","authStatus:"+s," at js_sdk/wa-permission/permission.js:86"),3==s?(i=!0,e("log","相机权限已经开启"," at js_sdk/wa-permission/permission.js:89")):e("log","相机权限没有开启"," at js_sdk/wa-permission/permission.js:91"),plus.ios.deleteObject(t),i}function l(){var i=!1,t=plus.ios.import("PHPhotoLibrary"),s=t.authorizationStatus();return e("log","authStatus:"+s," at js_sdk/wa-permission/permission.js:102"),3==s?(i=!0,e("log","相册权限已经开启"," at js_sdk/wa-permission/permission.js:105")):e("log","相册权限没有开启"," at js_sdk/wa-permission/permission.js:107"),plus.ios.deleteObject(t),i}function u(){var i=!1,t=plus.ios.import("CNContactStore"),s=t.authorizationStatusForEntityType(0);return 3==s?(i=!0,e("log","通讯录权限已经开启"," at js_sdk/wa-permission/permission.js:120")):e("log","通讯录权限没有开启"," at js_sdk/wa-permission/permission.js:122"),plus.ios.deleteObject(t),i}function d(){var i=!1,t=plus.ios.import("EKEventStore"),s=t.authorizationStatusForEntityType(0);return 3==s?(i=!0,e("log","日历权限已经开启"," at js_sdk/wa-permission/permission.js:135")):e("log","日历权限没有开启"," at js_sdk/wa-permission/permission.js:137"),plus.ios.deleteObject(t),i}function c(){var i=!1,t=plus.ios.import("EKEventStore"),s=t.authorizationStatusForEntityType(1);return 3==s?(i=!0,e("log","备忘录权限已经开启"," at js_sdk/wa-permission/permission.js:150")):e("log","备忘录权限没有开启"," at js_sdk/wa-permission/permission.js:152"),plus.ios.deleteObject(t),i}function m(i){return new Promise((function(t,s){plus.android.requestPermissions([i],(function(i){for(var s=0,n=0;n<i.granted.length;n++){var a=i.granted[n];e("log","已获取的权限："+a," at js_sdk/wa-permission/permission.js:167"),s=1}for(n=0;n<i.deniedPresent.length;n++){var o=i.deniedPresent[n];e("log","拒绝本次申请的权限："+o," at js_sdk/wa-permission/permission.js:172"),s=0}for(n=0;n<i.deniedAlways.length;n++){var r=i.deniedAlways[n];e("log","永久拒绝申请的权限："+r," at js_sdk/wa-permission/permission.js:177"),s=-1}t(s)}),(function(i){e("log","申请权限错误："+i.code+" = "+i.message," at js_sdk/wa-permission/permission.js:187"),t({code:i.code,message:i.message})}))}))}function p(i){return"location"==i?a():"camera"==i?r():"photoLibrary"==i?l():"record"==i?o():"push"==i?n():"contact"==i?u():"calendar"==i?d():"memo"==i&&c()}function v(){if(s){var i=plus.ios.import("UIApplication"),e=i.sharedApplication(),t=plus.ios.import("NSURL"),n=t.URLWithString("app-settings:");e.openURL(n),plus.ios.deleteObject(n),plus.ios.deleteObject(t),plus.ios.deleteObject(e)}else{var a=plus.android.importClass("android.content.Intent"),o=plus.android.importClass("android.provider.Settings"),r=plus.android.importClass("android.net.Uri"),l=plus.android.runtimeMainActivity(),u=new a;u.setAction(o.ACTION_APPLICATION_DETAILS_SETTINGS);var d=r.fromParts("package",l.getPackageName(),null);u.setData(d),l.startActivity(u)}}function g(){if(s){var i=!1,t=plus.ios.import("CLLocationManager");i=t.locationServicesEnabled();return e("log","系统定位开启:"+i," at js_sdk/wa-permission/permission.js:253"),plus.ios.deleteObject(t),i}var n=plus.android.importClass("android.content.Context"),a=plus.android.importClass("android.location.LocationManager"),o=plus.android.runtimeMainActivity(),r=o.getSystemService(n.LOCATION_SERVICE);i=r.isProviderEnabled(a.GPS_PROVIDER);return e("log","系统定位开启:"+i," at js_sdk/wa-permission/permission.js:262"),i}t("d3b7"),i.exports={judgeIosPermission:p,requestAndroidPermission:m,checkSystemEnableLocation:g,gotoAppPermissionSetting:v}}).call(this,t("0de9")["log"])},"78b3":function(i,e,t){"use strict";t.r(e);var s=t("4c7e"),n=t("d544");for(var a in n)"default"!==a&&function(i){t.d(e,i,(function(){return n[i]}))}(a);t("57b9");var o,r=t("f0c5"),l=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,"756e224b",null,!1,s["a"],o);e["default"]=l.exports},"794f":function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"uni-popup",props:{show:{type:Boolean,default:!1},position:{type:String,default:"middle"},mode:{type:String,default:"insert"},msg:{type:String,default:""},h5Top:{type:Boolean,default:!1},buttonMode:{type:String,default:"bottom"}},data:function(){return{offsetTop:0}},watch:{h5Top:function(i){this.offsetTop=i?44:0}},methods:{hide:function(){"insert"===this.mode&&"middle"===this.position||this.$emit("hidePopup")},closeMask:function(){"insert"===this.mode&&this.$emit("hidePopup")},moveHandle:function(){}},created:function(){var i=0;i=this.h5Top?0:44,this.offsetTop=i}};e.default=s},"80e2":function(i,e,t){var s=t("24fb");e=s(!1),e.push([i.i,".map[data-v-756e224b]{width:100%;height:260px}.uni-list-cell-left[data-v-756e224b]{padding:0 %?30?%}.text-desc[data-v-756e224b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?10?% %?20?%}.colorRed[data-v-756e224b]{color:red}.colorGreen[data-v-756e224b]{color:#32cd32}.colorYellow[data-v-756e224b]{color:#ff0}.colorBlue[data-v-756e224b]{color:#007aff}.bgBlue[data-v-756e224b]{background-color:#007aff}.bgGreen[data-v-756e224b]{background-color:#32cd32}.bgAsh[data-v-756e224b]{background-color:#c8c7cc}.uni-timeline[data-v-756e224b]{padding:%?30?% %?20?%}.uni-timeline-item-content-t[data-v-756e224b]{font-weight:700}.desc-pad[data-v-756e224b]{padding:0 %?0?%}.desc-pad .bz[data-v-756e224b]{color:#007aff}.desc-pad .bz .icon[data-v-756e224b]{color:#007aff}.uni-timeline-last-item .uni-timeline-item-divider[data-v-756e224b]{background:#bbb}.CBlue[data-v-756e224b]{background-color:#007aff;box-shadow:0 5px 5px #007aff}.CGreen[data-v-756e224b]{background-color:#32cd32;box-shadow:0 5px 5px #32cd32}.CAsh[data-v-756e224b]{background-color:#c8c7cc;box-shadow:0 5px 5px #c8c7cc}.module[data-v-756e224b]{overflow:hidden;margin:%?20?% auto;width:%?220?%;height:%?220?%;border-radius:50%;color:#fff;text-align:center}.module .text[data-v-756e224b]{font-size:15px;margin:%?50?% auto %?10?%}.uni-timeline-item .uni-timeline-item-content[data-v-756e224b]{width:100%;padding-right:%?20?%}.content-show[data-v-756e224b]{width:100%}.sign-title[data-v-756e224b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?30?% %?24?%;border-bottom:%?1?% solid #333}.sign-title .portrait[data-v-756e224b]{width:%?100?%;height:%?100?%;line-height:%?100?%;border-radius:50%;background-color:#007aff;color:#fff;font-size:%?28?%;text-align:center}.sign-title .sign-title-l[data-v-756e224b]{display:-webkit-box;display:-webkit-flex;display:flex}.sign-title .sign-title-l .text[data-v-756e224b]{margin-left:%?20?%}.sign-title .sign-title-l .text .name[data-v-756e224b]{font-size:%?32?%}.sign-title .sign-title-l .text  .gz[data-v-756e224b]{color:#00008b;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex}.sign-title .sign-title-l .text .gz uni-text[data-v-756e224b]{display:inline-block}.sign-title .sign-title-l .text .gz .t1[data-v-756e224b]{overflow:hidden; /*超出部分隐藏*/text-overflow:ellipsis;/* 超出部分显示省略号 */white-space:nowrap;/*规定段落中的文本不进行换行 */width:%?166?%/*需要配合宽度来使用*/}.iswq[data-v-756e224b]{padding:0 0 20px 10px;color:#9c3;border:1px solid #9c3;width:40px;height:5px;border-radius:4px;margin-left:%?20?%;display:inline-block}.isNormal[data-v-756e224b]{padding:0 0 20px 10px;color:#f50;border:1px solid #f50;width:40px;height:5px;border-radius:4px;margin-left:%?20?%;display:inline-block}.desc-pad .last[data-v-756e224b]{margin-bottom:%?80?%}.addClockIn[data-v-756e224b]{color:#00f}.uni-popup .content .text[data-v-756e224b]{color:#666}",""]),i.exports=e},"9c41":function(i,e,t){"use strict";t.r(e);var s=t("e0f6"),n=t("5ca3");for(var a in n)"default"!==a&&function(i){t.d(e,i,(function(){return n[i]}))}(a);t("26f7");var o,r=t("f0c5"),l=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,"7722493f",null,!1,s["a"],o);e["default"]=l.exports},a209:function(i,e,t){var s=t("de50");"string"===typeof s&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals);var n=t("4f06").default;n("721b64b4",s,!0,{sourceMap:!1,shadowMode:!1})},b114:function(i,e,t){var s=t("80e2");"string"===typeof s&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals);var n=t("4f06").default;n("6b0fe83c",s,!0,{sourceMap:!1,shadowMode:!1})},d544:function(i,e,t){"use strict";t.r(e);var s=t("2687"),n=t.n(s);for(var a in s)"default"!==a&&function(i){t.d(e,i,(function(){return s[i]}))}(a);e["default"]=n.a},de50:function(i,e,t){var s=t("24fb");e=s(!1),e.push([i.i,'.uni-mask[data-v-7722493f]{height:100vh;position:fixed;z-index:998;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.3)}.uni-popup[data-v-7722493f]{position:absolute;z-index:999;background-color:#fff}.uni-popup-middle[data-v-7722493f]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.uni-popup-middle.uni-popup-insert[data-v-7722493f]{min-width:%?380?%;min-height:%?380?%;max-width:100%;max-height:80%;-webkit-transform:translate(-50%,-65%);transform:translate(-50%,-65%);background:none;box-shadow:none}.uni-popup-middle.uni-popup-fixed[data-v-7722493f]{width:68%;padding:0 %?20?%;border-radius:6px}.uni-close-bottom[data-v-7722493f],\n.uni-close-right[data-v-7722493f]{position:absolute;bottom:%?-180?%;text-align:center;border-radius:50%;color:#f5f5f5;font-size:%?60?%;font-weight:700;opacity:.8;z-index:-1}.uni-close-right[data-v-7722493f]{right:%?-60?%;top:%?-80?%}.uni-close-bottom[data-v-7722493f]:after{content:"";position:absolute;width:0;border:1px #f5f5f5 solid;top:%?-200?%;bottom:%?56?%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);opacity:.8}.uni-popup-top[data-v-7722493f]{top:0;left:0;width:100%;height:%?100?%;line-height:%?100?%;text-align:center}.uni-popup-bottom[data-v-7722493f]{left:0;bottom:0;width:100%;min-height:%?100?%;line-height:%?100?%;text-align:center}',""]),i.exports=e},e0f6:function(i,e,t){"use strict";var s;t.d(e,"b",(function(){return n})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return s}));var n=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("v-uni-view",[t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:i.show,expression:"show"}],staticClass:"uni-mask",style:{top:i.offsetTop+"px"},on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.hide.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=i.$handleEvent(e),i.moveHandle.apply(void 0,arguments)}}}),t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:i.show,expression:"show"}],staticClass:"uni-popup",class:"uni-popup-"+i.position+" uni-popup-"+i.mode},[i._v(i._s(i.msg)),i._t("default"),"middle"===i.position&&"insert"===i.mode?t("v-uni-view",{staticClass:" uni-icon uni-icon-close",class:{"uni-close-bottom":"bottom"===i.buttonMode,"uni-close-right":"right"===i.buttonMode},on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.closeMask.apply(void 0,arguments)}}}):i._e()],2)],1)},a=[]}}]);